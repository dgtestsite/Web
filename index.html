<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NHL Trade Simulator</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  h1 { text-align: center; }
  .teams { display: flex; justify-content: space-around; margin-bottom: 20px; }
  table { border-collapse: collapse; width: 45%; }
  th, td { border: 1px solid #ccc; padding: 5px; text-align: left; }
  th { background: #eee; }
  #tradeMessage { font-weight: bold; color: red; text-align: center; margin-top: 10px; }
  .container { display: flex; justify-content: space-between; }
</style>
</head>
<body>

<h1>NHL Trade Simulator 2025â€“26</h1>

<div class="teams">
  <div>
    <label for="team1">Team 1:</label>
    <select id="team1"></select>
    <p>Salary Cap: $<span id="cap1">0</span></p>
  </div>
  <div>
    <label for="team2">Team 2:</label>
    <select id="team2"></select>
    <p>Salary Cap: $<span id="cap2">0</span></p>
  </div>
</div>

<div class="container">
  <table id="roster1">
    <thead><tr><th>Trade?</th><th>Name</th><th>Pos</th><th>Salary</th></tr></thead>
    <tbody></tbody>
  </table>

  <table id="roster2">
    <thead><tr><th>Trade?</th><th>Name</th><th>Pos</th><th>Salary</th></tr></thead>
    <tbody></tbody>
  </table>
</div>

<button onclick="proposeTrade()">Propose Trade</button>
<p id="tradeMessage"></p>

<script>
// Example NHL teams & salaries (expand as needed)
const salaryCapLimit = 95500000;
const teams = {
  "Toronto Maple Leafs": [
    {name: "Auston Matthews", pos: "C", salary: 15200000},
    {name: "Mitch Marner", pos: "RW", salary: 15000000},
    {name: "John Tavares", pos: "C", salary: 11750000}
  ],
  "Montreal Canadiens": [
    {name: "Nick Suzuki", pos: "C", salary: 7750000},
    {name: "Cole Caufield", pos: "RW", salary: 5000000},
    {name: "Shea Weber", pos: "D", salary: 8000000}
  ],
  "Edmonton Oilers": [
    {name: "Leon Draisaitl", pos: "C", salary: 16500000},
    {name: "Connor McDavid", pos: "C", salary: 16000000}
  ],
  "Colorado Avalanche": [
    {name: "Nathan MacKinnon", pos: "C", salary: 16050000},
    {name: "Cale Makar", pos: "D", salary: 9500000}
  ]
};

function populateTeams() {
  const team1 = document.getElementById('team1');
  const team2 = document.getElementById('team2');
  Object.keys(teams).forEach(t => {
    team1.add(new Option(t, t));
    team2.add(new Option(t, t));
  });
  updateRosters();
}

function updateRosters() {
  const t1 = document.getElementById('team1').value;
  const t2 = document.getElementById('team2').value;

  function fillRoster(tableId, roster) {
    const tbody = document.getElementById(tableId).querySelector('tbody');
    tbody.innerHTML = '';
    roster.forEach((player, index) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td><input type="checkbox" data-index="${index}"></td>
        <td>${player.name}</td>
        <td>${player.pos}</td>
        <td>${player.salary.toLocaleString()}</td>
      `;
      tbody.appendChild(row);
    });
  }

  fillRoster('roster1', teams[t1]);
  fillRoster('roster2', teams[t2]);

  // Update salary caps
  document.getElementById('cap1').innerText = teams[t1].reduce((sum,p)=>sum+p.salary,0).toLocaleString();
  document.getElementById('cap2').innerText = teams[t2].reduce((sum,p)=>sum+p.salary,0).toLocaleString();
}

function proposeTrade() {
  const t1 = document.getElementById('team1').value;
  const t2 = document.getElementById('team2').value;

  const tbody1 = document.getElementById('roster1').querySelector('tbody');
  const tbody2 = document.getElementById('roster2').querySelector('tbody');

  const selected1 = Array.from(tbody1.querySelectorAll('input[type="checkbox"]:checked')).map(cb => parseInt(cb.dataset.index));
  const selected2 = Array.from(tbody2.querySelectorAll('input[type="checkbox"]:checked')).map(cb => parseInt(cb.dataset.index));

  if(selected1.length === 0 && selected2.length === 0) {
    document.getElementById('tradeMessage').innerText = "Select players to trade!";
    return;
  }

  const tradeSalary1 = selected1.reduce((sum, idx) => sum + teams[t1][idx].salary, 0);
  const tradeSalary2 = selected2.reduce((sum, idx) => sum + teams[t2][idx].salary, 0);

  const team1Current = teams[t1].reduce((sum,p)=>sum+p.salary,0);
  const team2Current = teams[t2].reduce((sum,p)=>sum+p.salary,0);

  if(team1Current - tradeSalary1 + tradeSalary2 > salaryCapLimit || team2Current - tradeSalary2 + tradeSalary1 > salaryCapLimit) {
    document.getElementById('tradeMessage').innerText = "Trade violates salary cap!";
    return;
  }

  // Execute trade
  selected1.sort((a,b)=>b-a).forEach(idx => teams[t2].push(teams[t1].splice(idx,1)[0]));
  selected2.sort((a,b)=>b-a).forEach(idx => teams[t1].push(teams[t2].splice(idx,1)[0]));

  document.getElementById('tradeMessage').innerText = "Trade executed!";
  updateRosters();
}

document.getElementById('team1').addEventListener('change', updateRosters);
document.getElementById('team2').addEventListener('change', updateRosters);
populateTeams();
</script>

</body>
</html>
